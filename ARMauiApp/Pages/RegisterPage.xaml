<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="ARMauiApp.Pages.RegisterPage"
                      xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                      xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                      xmlns:viewmodels="clr-namespace:ARMauiApp.ViewModels"
                      x:DataType="viewmodels:RegisterViewModel"
                      Title="Đăng ký"
                      Shell.NavBarIsVisible="False">

       <ScrollView BackgroundColor="{AppThemeBinding Light={StaticResource Gray50}, Dark={StaticResource Gray900}}">
              <Grid RowDefinitions="Auto,*,Auto" Padding="0" VerticalOptions="Center">
                     <!-- Header -->
                     <StackLayout Grid.Row="0" Margin="36,0,0,0" Spacing="0">
                            <Label Text="Tạo tài khoản"
                                      FontFamily="Raleway"
                                      FontSize="44"
                                      FontAttributes="Bold"
                                      TextColor="#202020"
                                      HorizontalOptions="Start" />
                            <Label Text="Tham gia cùng chúng tôi hôm nay!"
                                      FontFamily="Nunito Sans"
                                      FontSize="18"
                                      TextColor="#202020"
                                      Margin="0,10,0,0"
                                      HorizontalOptions="Start" />
                     </StackLayout>

                     <!-- Register Form -->
                     <StackLayout Grid.Row="1" Margin="0,40,0,0" Spacing="24">
                            <!-- Username -->
                            <Frame BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57" HorizontalOptions="Center" WidthRequest="380">
                                   <Entry Text="{Binding Username}"
                                             Placeholder="Tên người dùng"
                                             FontFamily="Poppins"
                                             FontSize="14"
                                             TextColor="#202020"
                                             BackgroundColor="Transparent"
                                             HeightRequest="57"/>
                            </Frame>
                            <!-- Email -->
                            <Frame BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57" HorizontalOptions="Center" WidthRequest="380">
                                   <Entry Text="{Binding Email}"
                                             Keyboard="Email"
                                             Placeholder="Email"
                                             FontFamily="Poppins"
                                             FontSize="14"
                                             TextColor="#202020"
                                             BackgroundColor="Transparent"
                                             HeightRequest="57"/>
                            </Frame>
                            <!-- Birthday -->
                            <Frame BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57" HorizontalOptions="Center" WidthRequest="380">
                                   <DatePicker Date="{Binding Birthday}"
                                                        Format="dd/MM/yyyy"
                                                        MinimumDate="01/01/1950"
                                                        MaximumDate="{Binding MaxBirthday}"
                                                        FontFamily="Poppins"
                                                        FontSize="14"
                                                        TextColor="#202020"
                                                        BackgroundColor="Transparent"
                                                        HeightRequest="57"/>
                            </Frame>
                            <!-- Password -->
                            <Frame BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57" HorizontalOptions="Center" WidthRequest="380">
                                   <Entry Text="{Binding Password}"
                                             IsPassword="True"
                                             Placeholder="Mật khẩu (tối thiểu 6 ký tự)"
                                             FontFamily="Poppins"
                                             FontSize="14"
                                             TextColor="#202020"
                                             BackgroundColor="Transparent"
                                             HeightRequest="57"/>
                            </Frame>
                            <!-- Gender -->
                            <Frame BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57" HorizontalOptions="Center" WidthRequest="380">
                                   <Picker ItemsSource="{Binding GenderOptions}"
                                                 SelectedIndex="{Binding SelectedGender}"
                                                 FontFamily="Poppins"
                                                 FontSize="14"
                                                 TextColor="#202020"
                                                 BackgroundColor="Transparent"
                                                 HeightRequest="57"/>
                            </Frame>
                            <!-- Height & Weight Row -->
                            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" HorizontalOptions="Center" WidthRequest="380">
                                   <!-- Height -->
                                   <Frame Grid.Column="0" BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57">
                                          <Entry Text="{Binding Height}"
                                                    Keyboard="Numeric"
                                                    Placeholder="Chiều cao (cm)"
                                                    FontFamily="Poppins"
                                                    FontSize="14"
                                                    TextColor="#202020"
                                                    BackgroundColor="Transparent"
                                                    HeightRequest="57"/>
                                   </Frame>
                                   <!-- Weight -->
                                   <Frame Grid.Column="1" BorderColor="White" BackgroundColor="Transparent" Padding="20,0" HasShadow="False" HeightRequest="57">
                                          <Entry Text="{Binding Weight}"
                                                    Keyboard="Numeric"
                                                    Placeholder="Cân nặng (kg)"
                                                    FontFamily="Poppins"
                                                    FontSize="14"
                                                    TextColor="#202020"
                                                    BackgroundColor="Transparent"
                                                    HeightRequest="57"/>
                                   </Frame>
                            </Grid>
                            <!-- Register Button -->
                            <Button Text="Tạo tài khoản"
                                          Command="{Binding RegisterCommand}"
                                          IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                                          BackgroundColor="{StaticResource Primary}"
                                          TextColor="#F3F3F3"
                                          CornerRadius="16"
                                          FontFamily="Nunito Sans"
                                          FontSize="22"
                                          HeightRequest="57"
                                          FontAttributes="None"
                                          Margin="0,20,0,0"
                                          HorizontalOptions="Center"
                                          WidthRequest="342">
                                   <Button.Triggers>
                                          <DataTrigger TargetType="Button" Binding="{Binding IsLoading}" Value="True">
                                                 <Setter Property="Text" Value="Đang đăng ký..." />
                                          </DataTrigger>
                                   </Button.Triggers>
                            </Button>
                     </StackLayout>

                     <!-- Loading Indicator -->
                     <ActivityIndicator Grid.Row="1"
                                                   IsVisible="{Binding IsLoading}"
                                                   IsRunning="{Binding IsLoading}"
                                                   Color="{StaticResource Primary}"
                                                   VerticalOptions="Center"
                                                   HorizontalOptions="Center" />

                     <!-- Login Link -->
                     <StackLayout Grid.Row="2" Orientation="Horizontal" HorizontalOptions="Center" Margin="0,30,0,0" Spacing="5">
                            <Label Text="Đã có tài khoản?"
                                      FontFamily="Montserrat"
                                      FontSize="14"
                                      TextColor="#575757"
                                      VerticalOptions="Center" />
                            <Label Text="Đăng nhập"
                                      FontFamily="Montserrat"
                                      FontSize="14"
                                      FontAttributes="Bold"
                                      TextColor="{StaticResource Primary}"
                                      VerticalOptions="Center">
                                   <Label.GestureRecognizers>
                                          <TapGestureRecognizer Command="{Binding NavigateToLoginCommand}" />
                                   </Label.GestureRecognizers>
                            </Label>
                     </StackLayout>
              </Grid>
       </ScrollView>
</ContentPage>
